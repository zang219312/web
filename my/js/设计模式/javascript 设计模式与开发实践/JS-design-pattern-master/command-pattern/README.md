# 命令模式

## 应用场景

需要向某些对象发送请求，但并不知道请求的接收者是谁，也不知道被请求的操作是什么。
用一种松耦合的方式来设计程序，使得发送者和请求接收者能够消除彼此之间的耦合关系。

举例子：

客人向厨师发送请求，但完全不知道厨师名字和炒菜方式。命令模式把客人的**订餐请求**封装成 `command` 对象，也就是订单对象，这个对象可以四处传递（通过服务员传到厨师手中），客人不需要知道厨师的名字，从而解开了请求调用者和接收者之间的耦合关系。

命令模式还支持撤销、排队等操作。

再举例子：

点击按钮后，必须向某些负责具体行为的对象发送请求，这些对象就是请求的接收者。但目前并不知道接收者是什么对象，也不知道接收者究竟会做什么。此时借助**命令对象**的帮助，解开按钮和负责具体行为的对象之间的耦合。

## 不同的实现

在面向对象设计中，命令模式的接收者被当作command对象的属性保存起来，
约定执行命令的操作是调用 `command.execute` 方法。

在使用闭包的命令模式中，接收者被封装在闭包产生的环境中,
执行命令的操作是执行回调函数。

无论哪种实现，在将来执行命令时，都能顺利访问到接收者。

## 命令队列

一个命令执行结束后该如何通知队列，通常可以使用回调函数来通知队列，此外还可以选择发布订阅模式，在命令结束后发布一个消息，订阅者收到消息后便开始执行队列里的下一个命令。

## 宏命令

一组命令的集合，通过执行宏命令的方式，可以一次执行一批命令。
宏命令是命令模式与组合模式的联用产物。
